<!DOCTYPE html>
<!-- 
This file for github pages
see https://labneurocogdevel.github.io/cardtask
-->
<html>
  <head>
    <meta charset="UTF-8">
    <title>Card Task experiments</title>
    <!-- all of this also in ./templates/exp.html -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="static/js/jspsych/css/jspsych.css" type="text/css" />
    <link rel="stylesheet" href="static/css/style.css" type="text/css" />
    <script src="static/lib/jquery-3.4.1.min.js" type="text/javascript"> </script>
    <script src="static/lib/underscore-min.js" type="text/javascript"> </script>
    <script src="static/lib/backbone-min.js" type="text/javascript"> </script>
    <script src="static/lib/d3.v3.min.js" type="text/javascript"> </script>
    <script src="static/js/jspsych/jspsych.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-instructions.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-html-keyboard-response.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-survey-text.js" type="text/javascript"></script>
    <script src="static/js/utils.js" type="text/javascript"> </script>
    <script src="static/js/task.js" type="text/javascript"> </script>

    <script type="text/javascript">
      // redfine cards for testing

      
     /*
      CARDS relevant to testing:
       'p11_1D': new Card('❖', 'blue', LOWCOST , CARDWIN,  1),
       'p11_1R': new Card('✢', 'red' , HIGHCOST, CARDWIN,  1),
       'test_0R': new Card('0', 'red' , HIGHCOST, CARDWIN,  0),
       'test_0B': new Card('0', 'blue', LOWCOST , CARDWIN,  0),
      */
      // dummy trial that lasts 0 seconds
      function dummy(c){
	  return({
	      type: 'html-keyboard-response',
	      stimulus: '',
              trial_duration: 0,
              on_finish: function(data) {
                 data.cost  = CARDS[c].cost
                 data.p     = CARDS[c].p
                 data.win   = CARDS[c].score()
                 data.score = data.win - data.cost;
                 data.picked = c;
      }})}
      function fulltrial() {
	t = mktrial("p11_1D", "test_0R")
	jsPsych.init({timeline: [t, feedback], display_element: jsp});
      }
      function mkfeedback(c) {
	dummycard=dummy(c)
	console.log(dummycard)
	// push fake data and run feedback slide with given card
	jsPsych.init({timeline: [dummycard, feedback], display_element: jsp});
      }
    </script>

  </head>

  <body>

    <a href="#" onclick="fulltrial()">full</a> |
    feedback only:
     <a href="#" onclick="mkfeedback('p11_1R')">1r</a> , 
     <a href="#" onclick="mkfeedback('p11_1D')">1</a> ,
     <a href="#" onclick="mkfeedback('test_0R')">0r</a> 
     <a href="#" onclick="mkfeedback('test_0B')">0</a> 
    <br><br>
    <div id="jsp"> </div>

  </body>
</html>
